(this["webpackJsonpredux-example"]=this["webpackJsonpredux-example"]||[]).push([[0],{104:function(e,t,n){},105:function(e,t,n){"use strict";n.r(t);var s=n(22),i=n(30),c=n(7),r=n(20),a=n.n(r),o=n(15),l=n(0),d=function(e){return{type:"GET_MOVIE_LIST",id:e}},u=function(){return{type:"GET_ALL_MOVIE_LISTS"}},j=function(e,t){return{type:"ADD_MOVIE_TO_LIST",id:e,movie:t}},b=function(e,t){return{type:"CREATE_A_NEW_LIST",name:e,movie:t}},m=n(23),O=n.n(m),v=n(34),h=n(64),x=n(65),p=n(50),f=n.n(p),g="19c7ac68",L=function(){function e(){Object(h.a)(this,e)}return Object(x.a)(e,[{key:"getMoviesByTitle",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e?f.a.get("https://www.omdbapi.com/?s=".concat(e,"&page=").concat(t,"&apikey=").concat(g)).then((function(e){return e.data})).catch((function(e){return console.error(e)})):null}},{key:"getMovieById",value:function(e){return f.a.get("https://www.omdbapi.com/?i=".concat(e,"&apikey=").concat(g)).then((function(e){return e.data})).catch((function(e){return console.error(e)}))}}]),e}(),N=n(2),y=function(e){var t=e.imdbID,n=Object(l.useState)(),s=Object(o.a)(n,2),i=s[0],c=s[1];return Object(l.useEffect)((function(){var e=new L;(function(){var t=Object(v.a)(O.a.mark((function t(n){var s;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getMovieById(n);case 2:s=t.sent,c(s);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}})()(t)}),[t]),i?Object(N.jsxs)("div",{className:"row",children:[Object(N.jsxs)("div",{className:"col-md-6 text-center",children:[Object(N.jsx)("img",{variant:"top",src:"N/A"!==i.Poster?i.Poster:"/redux-movie-list/images/popcornPoster.jpg",alt:"".concat(i.Title," poster"),style:{width:"100%"}}),"N/A"===i.Poster?Object(N.jsx)("span",{className:"text-secondary",children:"No poster avaialble"}):null]}),Object(N.jsxs)("div",{className:"col-md-6",children:["N/A"!==i.imdbRating&&Object(N.jsx)("strong",{className:"float-end text-primary h4",children:i.imdbRating}),Object(N.jsx)("h4",{children:Object(N.jsx)("strong",{children:i.Title})}),"N/A"!==i.Rated&&Object(N.jsx)("span",{className:"badge bg-secondary m-1",children:i.Rated}),"N/A"!==i.Runtime&&Object(N.jsx)("span",{className:"badge bg-secondary m-1",children:i.Runtime}),"N/A"!==i.Genre&&Object(N.jsx)("span",{className:"badge bg-secondary m-1",children:i.Genre}),"N/A"!==i.Plot&&Object(N.jsxs)("p",{children:[Object(N.jsx)("strong",{children:"Plot"}),Object(N.jsx)("br",{}),i.Plot]}),"N/A"!==i.Actors&&Object(N.jsxs)("p",{children:[Object(N.jsx)("strong",{children:"Actors"}),Object(N.jsx)("br",{}),i.Actors]})]})]}):Object(N.jsx)("h2",{children:"Loading..."})},I=function(e){var t,n=e.onClose,s=e.children,i=e.buttons;setTimeout((function(){(t=document.getElementById("exampleModal")).classList.add("show")}),500);var c=function(){t.classList.remove("show"),setTimeout((function(){return n()}),500)};return Object(N.jsx)("div",{className:"modal fade",id:"exampleModal",tabIndex:"-1",style:{display:"block"},children:Object(N.jsx)("div",{className:"modal-dialog modal-lg modal-dialog-scrollable",children:Object(N.jsxs)("div",{className:"modal-content p-0",children:[Object(N.jsx)("div",{className:"modal-header",children:Object(N.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:c})}),Object(N.jsx)("div",{className:"modal-body",children:s}),Object(N.jsxs)("div",{className:"modal-footer",children:[i,Object(N.jsx)("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",onClick:c,children:"Close"})]})]})})})},S=n(36),M=function(e){var t=e.movie,n=e.buttons,s=e.onClose,i=e.selectedMovie,c=e.setSelectedMovie;return Object(N.jsxs)("div",{className:"h-100",children:[Object(N.jsxs)(S.a,{className:"h-100",children:[Object(N.jsx)(S.a.Img,{variant:"top",src:"N/A"!==t.Poster?t.Poster:"/redux-movie-list/images/popcornPoster.jpg",alt:"".concat(t.Title," poster"),onClick:function(){return c(t.imdbID)},style:{cursor:"pointer"}}),Object(N.jsx)(S.a.Body,{className:"pb-0",children:Object(N.jsx)(S.a.Title,{children:t.Title})}),Object(N.jsx)(S.a.Footer,{className:"bg-white border-0 pt-0 pb-3",children:n})]}),i===t.imdbID&&Object(N.jsx)(I,{title:t.Title,onClose:s,buttons:n,children:Object(N.jsx)(y,{imdbID:i})})]})},T=n(25),w=n(14),A=n(11),k=n(17),C=function(e){var t=e.movieList,n=e.getMovieList,s=e.removeMovieFromList,i=Object(l.useState)(null),r=Object(o.a)(i,2),a=r[0],d=r[1],u=Object(c.g)().id;console.log("ID:",u),console.log("ALL MOVIES",t);var j=null===t||void 0===t?void 0:t.filter((function(e){return e.id===parseInt(u)}));Object(l.useEffect)((function(){n()}),[n]);var b=function(){return d(null)};return Object(N.jsx)(T.a,{children:Object(N.jsx)(w.a,{children:(null===j||void 0===j?void 0:j.length)&&u?j.map((function(e){return e.list.map((function(n,i){return Object(N.jsxs)(A.a,{xs:12,md:6,lg:3,className:"mb-4",children:[Object(N.jsx)("h4",{children:e.name}),Object(N.jsx)(M,{movie:n,movieList:t,onClose:b,selectedMovie:a,setSelectedMovie:d,buttons:Object(N.jsxs)(k.a,{variant:"danger",onClick:function(){return s(e.id,n)},children:[Object(N.jsx)("i",{className:"bi bi-bookmark-dash-fill"}),"\xa0 Remove From List"]})},i)]},n.imdbID)}))})):Object(N.jsx)(w.a,{children:Object(N.jsxs)(A.a,{className:"text-center",children:[Object(N.jsxs)("p",{className:"text-secondary",children:["You haven't added any movies yet. ",Object(N.jsx)("br",{}),"First ",Object(N.jsx)("a",{href:"/redux-movie-list/",children:"search for a movie"}),', then click "Add To List".']}),Object(N.jsx)("img",{src:"/redux-movie-list/images/popcornPoster.jpg",alt:"",style:{maxWidth:"300px"}})]})})})})},E=C=Object(s.b)((function(e){return{movieList:e.movieListReducer}}),{getMovieList:d,removeMovieFromList:function(e,t){return{type:"REMOVE_MOVIE_FROM_LIST",id:e,movie:t}}})(C),_=n(35),R=n(43),D=function(e){var t=e.movie,n=e.onListClose,s=e.createANewList,i=(e.getAllMovieLists,e.addMovieToList),c=Object(l.useState)(),r=Object(o.a)(c,2),a=r[0],d=r[1],u=Object(l.useState)([]),j=Object(o.a)(u,2),b=j[0],m=j[1];Object(l.useEffect)((function(){var e=JSON.parse(localStorage.getItem("movieLists"));m(e||[])}),[]);var O;return O=b.length>0?Object(N.jsx)("h4",{children:"Click on a list name to add it to that name, or create a new list"}):Object(N.jsx)("h4",{children:"No lists are available, create a new list"}),b?Object(N.jsxs)(T.a,{children:[Object(N.jsx)(w.a,{children:O}),Object(N.jsx)(w.a,{children:Object(N.jsx)(A.a,{style:{marginBottom:"1em"},children:b.map((function(e,s){return Object(N.jsxs)(k.a,{variant:"warning",onClick:function(){return function(e,t){i(e,t),n()}(e.id,t)},style:{marginRight:"1em"},children:[Object(N.jsx)("i",{class:"bi bi-card-list"})," ",e.name]},s)}))})}),Object(N.jsx)(_.a,{inline:!0,onSubmit:function(e){s(a,t),e.preventDefault(),n()},children:Object(N.jsxs)(w.a,{children:[Object(N.jsx)(A.a,{sm:9,children:Object(N.jsx)(R.a,{className:"form-group mb-3",children:Object(N.jsx)(_.a.Control,{type:"text",id:"listName",name:"listName",placeholder:"Enter a list name",onChange:function(e){return d(e.target.value)},required:!0})})}),Object(N.jsx)(A.a,{sm:3,children:Object(N.jsx)(k.a,{type:"submit",className:"w-100 mb-3",children:"Create New List"})})]})})]}):null},P=D=Object(s.b)((function(e){return{getAllMovieLists:e.movieListReducer}}),{createANewList:b,getAllMovieLists:u,addMovieToList:j})(D),J=n(19),F=function(e){for(var t=e.searchResults,n=e.currentPage,s=e.setCurrentPage,i=t.totalResults?Math.ceil(t.totalResults/10):[],c=[],r=0;r<i;r++)c.push({count:r+1});var a=c.slice(0,2),o=n>3?[Object(N.jsx)(J.a.Ellipsis,{disabled:!0},"firstThreeDots")]:[],l=n>0?c.slice(Math.max(n-2,2),Math.min(n+1,i-2)):[],d=n<i-2?[Object(N.jsx)(J.a.Ellipsis,{disabled:!0},"lastThreeDots")]:[],u=c.slice(-2),j=function(e){return e.map((function(e){var t=e.count;return Object(N.jsx)(J.a.Item,{disabled:t===n,onClick:function(){return s(t)},children:t},t)}))},b=[].concat(j(a),o,j(l),d,j(u));return Object(N.jsxs)("div",{children:[i>1&&Object(N.jsxs)(J.a,{className:"justify-content-center",children:[Object(N.jsx)(J.a.First,{disabled:1===n,onClick:function(){return s(1)}},"first"),Object(N.jsx)(J.a.Prev,{disabled:1===n,onClick:function(){return s(n-1)}},"previous"),Object(N.jsxs)(J.a.Item,{disabled:!0,children:["Page ",n," of ",i]}),Object(N.jsx)(J.a.Next,{disabled:n===i,onClick:function(){return s(n+1)}},"next"),Object(N.jsx)(J.a.Last,{disabled:n===i,onClick:function(){return s(i)}},"last")]}),i>1&&Object(N.jsx)(J.a,{className:"justify-content-center",children:i>7?b:j(c)})]})},V=function(e){var t=e.onSearch,n=e.setTitle;return Object(N.jsx)(_.a,{inline:!0,onSubmit:function(e){e.preventDefault(),t()},children:Object(N.jsxs)(w.a,{children:[Object(N.jsx)(A.a,{sm:9,children:Object(N.jsx)(R.a,{className:"form-group mb-3",children:Object(N.jsx)(_.a.Control,{type:"text",id:"movieTitle",name:"movieTitle",placeholder:"Search for a movie, show, or episode by name...",onChange:function(e){return n(e.target.value)},required:!0})})}),Object(N.jsx)(A.a,{sm:3,children:Object(N.jsx)(k.a,{type:"submit",className:"w-100 mb-3",children:"Search"})})]})})},B=function(e){e.movieList;var t=e.getMovieList,n=(e.addMovieToList,e.createANewList,new L),s=Object(l.useState)(),i=Object(o.a)(s,2),c=i[0],r=i[1],a=Object(l.useState)(),d=Object(o.a)(a,2),u=d[0],j=d[1],b=Object(l.useState)(1),m=Object(o.a)(b,2),h=m[0],x=m[1],p=Object(l.useState)(null),f=Object(o.a)(p,2),g=f[0],y=f[1],S=Object(l.useState)(null),C=Object(o.a)(S,2),E=C[0],_=C[1];Object(l.useEffect)((function(){t()}),[t]);var R=function(){var e=Object(v.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getMoviesByTitle(u,h);case 2:t=e.sent,r(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(v.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u){e.next=5;break}return x(1),e.next=4,R();case 4:return e.abrupt("return",e.sent);case 5:return e.abrupt("return",[]);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=Object(v.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x(t),R();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){return y(null)},G=function(){return _(null)};return Object(N.jsxs)(T.a,{children:[Object(N.jsx)(V,{onSearch:D,setTitle:j}),c?Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(w.a,{children:c.Search.map((function(e,t,n){var s;return Object(N.jsxs)(A.a,{xs:12,md:6,lg:3,className:"mb-4",children:[Object(N.jsx)(M,{movie:e,movieList:n,onClose:B,selectedMovie:g,setSelectedMovie:y,buttons:(null===(s=n.list)||void 0===s?void 0:s.indexOf(e.imdbID))?Object(N.jsxs)(k.a,{variant:"primary",children:[Object(N.jsx)("i",{className:"bi bi-bookmark-plus"}),"\xa0 In Movie List"]}):Object(N.jsxs)(k.a,{variant:"success",onClick:function(){return t=e.imdbID,void _(t);var t},children:[Object(N.jsx)("i",{className:"bi bi-bookmark-plus"}),"\xa0 Add to list"]})},t),E===e.imdbID&&Object(N.jsx)(I,{movie:e,onClose:G,children:Object(N.jsx)(P,{movie:e,onListClose:G})})]},e.imdbID)}))}),Object(N.jsx)(w.a,{children:Object(N.jsx)(A.a,{children:Object(N.jsx)(F,{searchResults:c,currentPage:h,setCurrentPage:J})})})]}):Object(N.jsx)(w.a,{children:Object(N.jsxs)(A.a,{className:"text-center",children:[Object(N.jsx)("p",{className:"text-secondary",children:"Use the search bar above to begin"}),Object(N.jsx)("img",{src:"/redux-movie-list/images/popcornPoster.jpg",alt:"",style:{maxWidth:"300px"}})]})})]})},G=B=Object(s.b)((function(e){return{movieList:e.movieListReducer}}),{getMovieList:d,addMovieToList:j,createANewList:b})(B),W=n(31),q=n(66),H=function(e){return function(e){return function(t){console.group(t.type),console.info("dispatching",t);var n=e(t);return console.groupEnd(),n}}},K=function(e){return function(t,n,s){return e((function(e,n){return t(e,n)}),n,s)}},U=n(67),Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_MOVIE_LIST":var n=localStorage.getItem("movieLists");return n?JSON.parse(n):e;case"GET_ALL_MOVIE_LISTS":var s=localStorage.getItem("movieLists");return s?JSON.parse(s):e;case"ADD_MOVIE_TO_LIST":var i=JSON.parse(localStorage.getItem("movieLists")),c=z(i,t.id);c.list.push(t.movie);var r=i.findIndex((function(e){return e.id===t.id}));return i[r]=c,localStorage.setItem("movieLists",JSON.stringify(i)),i;case"REMOVE_MOVIE_FROM_LIST":var a=localStorage.getItem("movieLists");a=JSON.parse(a);var o=z(a,t.id),l=o.list.filter((function(e){return e.imdbID!==t.movie.imdbID})),d=a.findIndex((function(e){return e.id===t.id}));return l.length>0?a[d].list=l:a.splice(d,1),localStorage.setItem("movieLists",JSON.stringify(a)),a||null;case"CREATE_A_NEW_LIST":var u=localStorage.getItem("movieLists"),j={},b=Q();return(u=JSON.parse(u))||(u=[]),j={id:b,name:t.name,list:[t.movie]},u.push(j),localStorage.setItem("movieLists",JSON.stringify(u)),u;default:return e}},z=function(e,t){return e.filter((function(e){return e.id===t}))[0]},Q=function(){return Math.floor(101*Math.random())},X=Object(W.combineReducers)({movieListReducer:Y});var Z=n(40),$=n(54),ee=n(53),te=function(e){e.getAllMovieLists;var t=JSON.parse(localStorage.getItem("movieLists")),n=Object(c.f)();return Object(N.jsx)(Z.a,{bg:"light",fixed:"top",expand:"sm",children:Object(N.jsxs)(T.a,{children:[Object(N.jsxs)(Z.a.Brand,{as:i.b,to:"/",children:[Object(N.jsx)("img",{src:"/redux-movie-list/logo192.png",width:"30",height:"30",alt:"",className:"d-inline-block align-top mr-2"}),"Movie Database"]}),Object(N.jsx)(Z.a.Toggle,{}),Object(N.jsx)(Z.a.Collapse,{children:Object(N.jsxs)($.a,{children:[Object(N.jsx)($.a.Link,{as:i.b,to:"/",children:"Home"}),Array.isArray(t)&&t.length?Object(N.jsx)(ee.a,{title:"Movie List",id:"nav-dropdown",children:function(e){return Array.isArray(e)?Object(N.jsx)(N.Fragment,{children:e&&e.map((function(e){return Object(N.jsx)(ee.a.Item,{eventKey:e.id,onClick:function(){return t=e.id,void n.push("/movie-list/"+t);var t},children:e.name})}))}):Object(N.jsx)(N.Fragment,{})}(t)}):null]})})]})})},ne=te=Object(s.b)((function(e){return{movieList:e.movieListReducer}}),{getAllMovieLists:u})(te);n(103),n(104);a.a.render(Object(N.jsx)(s.a,{store:function(e){var t=[H,q.a],n=[W.applyMiddleware.apply(void 0,t),K];return Object(W.createStore)(X,e,U.composeWithDevTools.apply(void 0,n))}(),children:Object(N.jsxs)(i.a,{children:[Object(N.jsx)(ne,{}),Object(N.jsxs)(c.c,{children:[Object(N.jsx)(c.a,{exact:!0,path:"/",component:G}),Object(N.jsx)(c.a,{path:"/movie-list/:id",component:E})]})]})}),document.getElementById("root"))}},[[105,1,2]]]);
//# sourceMappingURL=main.3c5ec129.chunk.js.map